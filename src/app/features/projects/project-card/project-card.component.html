<article class="card">
  <header>
    <h3>{{ project.name }}</h3>
  </header>
  <p class="desc" *ngIf="project.description as d; else empty">{{ d }}</p>
  <ng-template #empty>
    <p class="desc muted">Aucune description</p>
  </ng-template>
  <div class="stats">
    <span>Tâches: {{ (stats$ | async)?.total || 0 }}</span>
    <span>Terminées: {{ (stats$ | async)?.completed || 0 }}</span>
    <span>Membres: {{ ((liveProject$ | async)?.members?.length) || 0 }}</span>
    <span>Statut: {{ statusLabel((liveProject$ | async)?.status) }}</span>
    <span *ngIf="project.role" class="role-badge">Rôle: {{ project.role }}</span>
  </div>
  <footer class="actions">
    <button type="button" (click)="view.emit(project)">Voir</button>
    <ng-container *ngIf="project.canEdit">
      <button type="button" class="icon-btn" title="Modifier" aria-label="Modifier" (click)="edit.emit(project)">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 20h9"/>
          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
        </svg>
      </button>
      <button type="button" class="icon-btn danger" title="Supprimer" aria-label="Supprimer" (click)="remove.emit(project)">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
          <path d="M10 11v6M14 11v6"/>
          <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/>
        </svg>
      </button>
    </ng-container>
  </footer>
</article>
